<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>从代码到实物三人组总结</title>
  
  <subtitle>自动遮光板</subtitle>
  <link href="https://welcometoourproject.github.io/atom.xml" rel="self"/>
  
  <link href="https://welcometoourproject.github.io/"/>
  <updated>2022-01-06T08:22:43.280Z</updated>
  <id>https://welcometoourproject.github.io/</id>
  
  <author>
    <name>三人小组</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>期末设计--自动遮阳板</title>
    <link href="https://welcometoourproject.github.io/2021/12/11/%E6%9C%9F%E6%9C%AB%E4%BD%9C%E4%B8%9A%E8%AE%BE%E8%AE%A1/"/>
    <id>https://welcometoourproject.github.io/2021/12/11/%E6%9C%9F%E6%9C%AB%E4%BD%9C%E4%B8%9A%E8%AE%BE%E8%AE%A1/</id>
    <published>2021-12-11T04:55:17.000Z</published>
    <updated>2022-01-06T08:22:43.280Z</updated>
    
    <content type="html"><![CDATA[<h1 id="自动遮阳板"><a href="#自动遮阳板" class="headerlink" title="自动遮阳板"></a>自动遮阳板</h1><p>我们在开车的时候时常会遇到太阳光刺眼的情况，当高速行驶的时候手动打开遮阳板很危险，所以萌生了制作自动遮阳板的想法</p><h2 id="设计阶段"><a href="#设计阶段" class="headerlink" title="设计阶段"></a>设计阶段</h2><p>制作自动遮阳板的一个难题就是如何测定太阳光入射角</p><p>所以我们就先制作了太阳光入射角测量仪</p><h3 id="线路连接"><a href="#线路连接" class="headerlink" title="线路连接"></a>线路连接</h3><img src="https://gitee.com/code2thing2021/picgo/raw/master/202112121008675.png" style="zoom:50%;" /><p><img src="https://gitee.com/code2thing2021/picgo/raw/master/202112121008677.png"></p><img src="https://gitee.com/code2thing2021/picgo/raw/master/202112121008676.png" style="zoom:67%;" /><p>通过上图我们可以看到，这一装置能较为准确的测量太阳光入射角</p><h1 id="PCB-板设计"><a href="#PCB-板设计" class="headerlink" title="PCB 板设计"></a>PCB 板设计</h1><p><img src="https://gitee.com/code2thing2021/picgo/raw/master/202201061611399.jpg"></p><h1 id="外壳设计"><a href="#外壳设计" class="headerlink" title="外壳设计"></a>外壳设计</h1><p><img src="https://gitee.com/code2thing2021/picgo/raw/master/202201061611401.jpg"></p><p><img src="https://gitee.com/code2thing2021/picgo/raw/master/202201061611400.jpg"></p><h1 id="成品展示"><a href="#成品展示" class="headerlink" title="成品展示"></a>成品展示</h1><p>当太阳角度较低时，舵机将带动遮阳板转动，起到遮挡太阳光的效果</p><p><img src="https://gitee.com/code2thing2021/picgo/raw/master/202201061611402.jpg"></p><h1 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h1><h3 id="硬件模块代码"><a href="#硬件模块代码" class="headerlink" title="硬件模块代码"></a>硬件模块代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Servo.h&gt;</span></span></span><br><span class="line">Servo s;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">// put your setup code here, to run once:</span></span><br><span class="line">  Serial.<span class="built_in">begin</span>(<span class="number">9600</span>);</span><br><span class="line">  s.<span class="built_in">attach</span>(<span class="number">9</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">double</span> i,j,angle;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">// put your main code here, to run repeatedly:</span></span><br><span class="line">  i=<span class="built_in">analogRead</span>(A0);</span><br><span class="line">  j=<span class="built_in">analogRead</span>(A1);</span><br><span class="line">  Serial.<span class="built_in">println</span>(<span class="string">&quot;i:&quot;</span>);</span><br><span class="line">  Serial.<span class="built_in">println</span>(i);</span><br><span class="line">  Serial.<span class="built_in">println</span>(<span class="string">&quot;j:&quot;</span>);</span><br><span class="line">  Serial.<span class="built_in">println</span>(j);</span><br><span class="line">  <span class="built_in">delay</span>(<span class="number">500</span>);</span><br><span class="line">  angle=<span class="built_in">atan</span>(j/i)*<span class="number">180</span>/<span class="number">3.1415926</span>;</span><br><span class="line">  angle=<span class="number">9</span>/<span class="number">4</span>*angle<span class="number">-54</span>;</span><br><span class="line">  <span class="keyword">if</span>(angle&lt;=<span class="number">44</span>)&#123;</span><br><span class="line">    s.<span class="built_in">write</span>(<span class="number">90</span>-angle<span class="number">-20</span>);</span><br><span class="line">    &#125;</span><br><span class="line">   <span class="keyword">else</span>&#123;</span><br><span class="line">    s.<span class="built_in">write</span>(<span class="number">0</span>); </span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h3 id="串口编程"><a href="#串口编程" class="headerlink" title="串口编程"></a>串口编程</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> vpython <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment">## 初始化各个模块</span></span><br><span class="line">scene=canvas(width=<span class="number">800</span>,height=<span class="number">200</span>,center=vector(<span class="number">10</span>,<span class="number">0</span>,<span class="number">0</span>),background=color.cyan)</span><br><span class="line">box=box(pos=vector(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>),size=vector(<span class="number">10</span>,<span class="number">10</span>,<span class="number">10</span>))</span><br><span class="line"></span><br><span class="line">l=<span class="number">20</span></span><br><span class="line">arrowlist0 = []</span><br><span class="line">arrowlist1 = []</span><br><span class="line">theta=<span class="number">0</span></span><br><span class="line"><span class="comment"># 上平面</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(-<span class="number">4</span>, <span class="number">4</span>, <span class="number">2</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(-<span class="number">4</span>, <span class="number">4</span>, <span class="number">2</span>):</span><br><span class="line">        arrowlist0.append(arrow(pos=vector(i + l * math.cos(theta), <span class="number">6</span> + l * math.sin(theta), j),</span><br><span class="line">                               axis=vector(-l * math.cos(theta), -l * math.sin(theta), <span class="number">0</span>), shaftwidth=<span class="number">0.1</span>,</span><br><span class="line">                               color=vector(<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>)))</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(-<span class="number">4</span>, <span class="number">4</span>, <span class="number">2</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(-<span class="number">4</span>, <span class="number">4</span>, <span class="number">2</span>):</span><br><span class="line">        arrowlist1.append(arrow(pos=vector(<span class="number">6</span> + l * math.cos(theta), i + l * math.sin(theta), j),</span><br><span class="line">                               axis=vector(-l * math.cos(theta), -l * math.sin(theta), <span class="number">0</span>), shaftwidth=<span class="number">0.1</span>,</span><br><span class="line">                               color=vector(<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>)))</span><br><span class="line"><span class="comment">#设置背景</span></span><br><span class="line">gd=graph(title=<span class="string">&quot;角度变化图&quot;</span>,width=<span class="number">600</span>,height=<span class="number">400</span>,xtitle=<span class="string">&quot;时间&quot;</span>,ytitle=<span class="string">&quot;角度&quot;</span>)</span><br><span class="line"><span class="comment">#创建角度-时间曲线显示窗口</span></span><br><span class="line">xt=gcurve(graph=gd,color=color.red)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">myplot</span>(<span class="params">theta</span>):</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> arrowlist0:</span><br><span class="line">        i.pos.x = + l * math.cos(theta)</span><br><span class="line">        i.pos.y = <span class="number">6</span> + l * math.sin(theta)</span><br><span class="line">        i.axis = vector(-l * math.cos(theta), -l * math.sin(theta), <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> arrowlist1:</span><br><span class="line">        j.pos.x = <span class="number">6</span> + l * math.cos(theta)</span><br><span class="line">        j.pos.y = l * math.sin(theta)</span><br><span class="line">        j.axis = vector(-l * math.cos(theta), -l * math.sin(theta), <span class="number">0</span>)</span><br><span class="line"><span class="keyword">import</span> serial</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ReceiveSerial</span>(<span class="params">mySerial</span>):</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        data=<span class="built_in">str</span>(serial.read_all())</span><br><span class="line">        <span class="keyword">if</span> data==<span class="string">&quot;&quot;</span>:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        sleep(<span class="number">0.02</span>)</span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    serial = serial.Serial(<span class="string">&#x27;COM7&#x27;</span>, <span class="number">9600</span>, timeout=<span class="number">0.5</span>)</span><br><span class="line">    <span class="keyword">if</span> (serial.isOpen()):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;open success!&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;openfailed!&quot;</span>)</span><br><span class="line">    start_time=time.time()</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        data = ReceiveSerial(serial)</span><br><span class="line">        <span class="keyword">if</span> data != <span class="string">&quot;b&#x27;&#x27;&quot;</span>:</span><br><span class="line">            pattern = re.<span class="built_in">compile</span>(<span class="string">r&quot;\d+.\d+&quot;</span>)</span><br><span class="line">            listdata = pattern.findall(data)</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(listdata) == <span class="number">2</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;i= &quot;</span> + listdata[<span class="number">0</span>] + <span class="string">&quot; j= &quot;</span> + listdata[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                <span class="comment">#规划后的角度角度制</span></span><br><span class="line">                angle=<span class="number">9</span> / <span class="number">4</span> * math.degrees(math.atan((<span class="built_in">float</span>(listdata[<span class="number">1</span>])) / <span class="built_in">float</span>(listdata[<span class="number">0</span>]))) - <span class="number">54</span></span><br><span class="line">                <span class="built_in">print</span>(angle)</span><br><span class="line">                <span class="comment">#规划后的角度弧度制</span></span><br><span class="line">                rad=math.radians(angle)</span><br><span class="line">                <span class="built_in">print</span>(rad)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;***********&quot;</span>)</span><br><span class="line">                myplot(rad)</span><br><span class="line">                xt.plot(time.time()-start_time,angle)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">continue</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">通过光敏电阻的设计测量太阳入射角，设计一个光照入射角测量仪，进而制作一个汽车自动遮阳板。通过这个项目加强对3D打印、激光切割、硬件开发的学习</summary>
    
    
    
    <category term="2021-02期代码到实物" scheme="https://welcometoourproject.github.io/categories/2021-02%E6%9C%9F%E4%BB%A3%E7%A0%81%E5%88%B0%E5%AE%9E%E7%89%A9/"/>
    
    
    <category term="期末" scheme="https://welcometoourproject.github.io/tags/%E6%9C%9F%E6%9C%AB/"/>
    
  </entry>
  
  <entry>
    <title>期中设计--超声波测距仪</title>
    <link href="https://welcometoourproject.github.io/2021/11/17/%E6%9C%9F%E4%B8%AD%E4%BD%9C%E4%B8%9A%E8%AE%BE%E8%AE%A1/"/>
    <id>https://welcometoourproject.github.io/2021/11/17/%E6%9C%9F%E4%B8%AD%E4%BD%9C%E4%B8%9A%E8%AE%BE%E8%AE%A1/</id>
    <published>2021-11-17T12:45:17.000Z</published>
    <updated>2021-12-12T03:00:19.255Z</updated>
    
    <content type="html"><![CDATA[<h2 id="期中作业"><a href="#期中作业" class="headerlink" title="期中作业"></a>期中作业</h2><ol><li><p>制作目标</p><blockquote><ol><li>能够随时测距</li><li>能够实时显示测距结果</li></ol></blockquote></li><li><p>硬件组成</p><table><thead><tr><th align="center">序号</th><th align="center">名称</th></tr></thead><tbody><tr><td align="center">1</td><td align="center">Arduino UNO</td></tr><tr><td align="center">2</td><td align="center">LCD</td></tr><tr><td align="center">3</td><td align="center">超声波传感器</td></tr><tr><td align="center">4</td><td align="center">面包板</td></tr><tr><td align="center">5</td><td align="center">开关</td></tr><tr><td align="center">6</td><td align="center">杜邦线</td></tr></tbody></table></li><li><p>连接方法</p><p><img src="https://gitee.com/code2thing2021/picgo/raw/master/202112121021417.jpg"></p><p>对于I2C接Arduino的方法：SDA接A4；SCL接A5</p></li><li><p>代码编写</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;afstandssensor.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> Name:    Sketch1.ino</span></span><br><span class="line"><span class="comment"> Created: 2021/11/11 16:03:34</span></span><br><span class="line"><span class="comment"> Author:  sishu</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// the setup function runs once when you press reset or power the board</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;LiquidCrystal_I2C.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> triggerPin = <span class="number">13</span>;</span><br><span class="line"><span class="keyword">int</span> echoPin = <span class="number">12</span>;</span><br><span class="line">                    <span class="comment">// AfstandsSensor(triggerPin, echoPin);</span></span><br><span class="line"><span class="function">AfstandsSensor <span class="title">afstandssensor</span><span class="params">(triggerPin, echoPin)</span></span>;  <span class="comment">// Starter afstandssensoren på ben 13 og 12.</span></span><br><span class="line"><span class="function">LiquidCrystal_I2C <span class="title">lcd</span><span class="params">(<span class="number">0x27</span>, <span class="number">20</span>, <span class="number">4</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  lcd.<span class="built_in">init</span>();                      <span class="comment">// initialize the lcd </span></span><br><span class="line">  <span class="comment">// Print a message to the LCD.</span></span><br><span class="line">  lcd.<span class="built_in">backlight</span>();</span><br><span class="line">  </span><br><span class="line">  Serial.<span class="built_in">begin</span>(<span class="number">9600</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// the loop function runs over and over again until power down or reset</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">//afstandssensor.afstandCM();</span></span><br><span class="line">  lcd.<span class="built_in">init</span>();                      <span class="comment">// initialize the lcd </span></span><br><span class="line">  <span class="comment">// Print a message to the LCD.</span></span><br><span class="line">  lcd.<span class="built_in">backlight</span>();</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  lcd.<span class="built_in">setCursor</span>(<span class="number">3</span>, <span class="number">0</span>);</span><br><span class="line">  lcd.<span class="built_in">print</span>(afstandssensor.<span class="built_in">afstandCM</span>());</span><br><span class="line">  lcd.<span class="built_in">print</span>(<span class="string">&quot;cm&quot;</span>);</span><br><span class="line">  <span class="comment">//int a = 15;</span></span><br><span class="line">  Serial.<span class="built_in">println</span>(afstandssensor.<span class="built_in">afstandCM</span>());</span><br><span class="line">  <span class="built_in">delay</span>(<span class="number">300</span>);</span><br><span class="line">  lcd.<span class="built_in">clear</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>成果展示</p></li></ol><p><a href="https://www.bilibili.com/video/BV1MZ4y197JU/">成果已上传至B站</a></p><p><a href="https://www.bilibili.com/video/BV1MZ4y197JU/">https://www.bilibili.com/video/BV1MZ4y197JU/</a></p>]]></content>
    
    
    <summary type="html">利用超声波传感器以及Arduino、LCD设计一个超声波测距仪</summary>
    
    
    
    <category term="2021-02期代码到实物" scheme="https://welcometoourproject.github.io/categories/2021-02%E6%9C%9F%E4%BB%A3%E7%A0%81%E5%88%B0%E5%AE%9E%E7%89%A9/"/>
    
    
    <category term="期中" scheme="https://welcometoourproject.github.io/tags/%E6%9C%9F%E4%B8%AD/"/>
    
  </entry>
  
</feed>
